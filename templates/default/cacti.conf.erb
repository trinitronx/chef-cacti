# 
# Dynamically generated by Chef on <%= node["fqdn"] %>
# Local modifications will be overwritten by Chef.
# 

#
# Cacti: An rrd based graphing tool
#

# Change the following ACLs to open up Cacti to other network devices.
# For example:
# On httpd 2.4, change "Require host localhost" to "Require all granted".
# On httpd 2.2, change "Allow from localhost" to "Allow from all".

Alias /cacti    <%= @cacti_docroot %>

<Directory <%= @cacti_docroot %>/>
  <IfModule mod_authz_core.c>
    # httpd 2.4
    Require host localhost
  </IfModule>
  <IfModule !mod_authz_core.c>
    # httpd 2.2
    Order deny,allow
    #Deny from all
    Allow from all
  </IfModule>
  
  Options +FollowSymLinks
  AllowOverride None

  <IfModule mod_php5.c>
    php_flag magic_quotes_gpc Off
    php_flag short_open_tag On
    php_flag register_globals Off
    php_flag register_argc_argv On
    php_flag track_vars On
    # this setting is necessary for some locales
    php_value mbstring.func_overload 0
    php_value include_path .
  </IfModule>

</Directory>

<Directory <%= @cacti_docroot %>/install>
  # mod_security overrides.
  # Uncomment these if you use mod_security.
  # allow POST of application/x-www-form-urlencoded during install
  #SecRuleRemoveById 960010
  # permit the specification of the rrdtool paths during install
  #SecRuleRemoveById 900011
</Directory>


# These sections marked "Require all denied" (or "Deny from all")
# should not be modified.
# These are in place in order to harden Cacti.
<Directory <%= @cacti_docroot %>/log>
  <IfModule mod_authz_core.c>
    Require all denied
  </IfModule>
  <IfModule !mod_authz_core.c>
    Order deny,allow
    Deny from all
  </IfModule>
</Directory>
<Directory <%= @cacti_docroot %>/rra>
  <IfModule mod_authz_core.c>
    Require all denied
  </IfModule>
  <IfModule !mod_authz_core.c>
    Order deny,allow
    Deny from all
  </IfModule>
</Directory>
